name: dsmr-reader
services:
  dsmr:
    image: ghcr.io/xirixiz/dsmr-reader-docker:latest
    restart: unless-stopped   
    ports:
      - target: 80
        published: 7777
        protocol: tcp   
    volumes:
      - type: bind
        source: /DATA/AppData/DSMR/data/backups
        target: /app/backups
  dsmrdb:
    # When using Postgres, release 13.x and 14.x are supported only
    # due to the limited availability of client packages, especially for arm32v7
    image: postgres:14-alpine
    container_name: Dsmrdb
    restart: always
    volumes:
      - /volume1/docker/DSMR/dsmrdb:/var/lib/postgresql/data
    environment:
      - TZ=Europe/Amsterdam
      - PG_TZ=Europe/Amsterdam
      - POSTGRES_USER=dsmrreader
      - POSTGRES_PASSWORD=dsmrreader
      - POSTGRES_DB=dsmrreader
    healthcheck:
      # postgres is the default user, please update with
      # the DJANGO_DATABASE_USER used for dsmr-reader-docker
      # default for DSMR Reader is dsmrreader
      test: [ "CMD-SHELL", "pg_isready -U dsmrreader" ]
      interval: 10s
      timeout: 5s
      retries: 10        
x-casaos:
  architectures:
    - amd64
  main: dsmr, dsmrdb
  description:
    en_us: DSMR-Reader For p1 reader
  tagline:
    en_us: Dsmr
  developer: ''
  author: ''
  icon: https://avatars.githubusercontent.com/u/57727360?s=48&v=4
  thumbnail: https://github.com/dsmrreader/dsmr-reader/blob/v5/docs/_static/screenshots/v5/frontend/dashboard.png?raw=true
  title:
    en_us: Dsmr-reader
  category: Fastxlstore
  port_map: '7777'
